@model List<BookStore_293.Models.CartItem>
@{
    ViewData["Title"] = "Your Cart";
}

<h2>Your Cart</h2>

@if(TempData["Error"] != null) { <div class="alert alert-danger">@TempData["Error"]</div> }
@if(TempData["Success"] != null) { <div class="alert alert-success">@TempData["Success"]</div> }

<table class="table">
    <thead><tr><th>Title</th><th>Price</th><th>Qty</th><th>Subtotal</th><th></th></tr></thead>
    <tbody>
    @foreach(var item in Model)
    {
        <tr>
            <td>@item.Title</td>
            <td>@item.Price.ToString("C")</td>
            <td>
                <form asp-action="UpdateQuantity" method="post" style="display:inline-block">
                    <input type="hidden" name="id" value="@item.Id" />
                    <input type="number" name="qty" value="@item.Quantity" min="0" style="width:70px" />
                    <button class="btn btn-sm btn-primary" type="submit">Update</button>
                </form>
            </td>
            <td>@(item.Price * item.Quantity).ToString("C")</td>
            <td>
                <form asp-action="Remove" method="post">
                    <input type="hidden" name="id" value="@item.Id" />
                    <button class="btn btn-sm btn-danger" type="submit">Remove</button>
                </form>
            </td>
        </tr>
    }
    </tbody>
</table>

<div class="mb-3">
    <strong>Total: </strong> @ViewBag.Total.ToString("C")
</div>

<form asp-action="Checkout" method="post">
    <button class="btn btn-success">Proceed to Payment (Mock)</button>
</form>
